(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{lvJx:function(e,t,n){"use strict";n.r(t),n.d(t,"EditVehiclePageModule",function(){return v});var l=n("ofXK"),i=n("3Pt+"),o=n("TEn/"),r=n("tyNb"),a=n("mrSG"),c=n("H+bZ"),d=n("2Rin"),s=n("a/9d"),m=n("fXoL"),h=n("jhN1");function p(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-select-option",18),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275propertyInterpolate"]("value",e.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](e.name)}}function u(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-select-option",18),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275property"]("value",e.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](e.name)}}const g=[{path:"",component:(()=>{class e{constructor(e,t,n,l,i,o){this.nav=e,this.api=t,this.util=n,this.camera=l,this.actionSheetController=i,this.sanitize=o,this.model_id="",this.color="",this.reg_number="",this.note="",this.models="",this.model_id2="",this.selected_vehicle=JSON.parse(localStorage.getItem("selected_vehicle")),console.log(this.selected_vehicle),this.model_id=this.selected_vehicle.id,this.models=this.selected_vehicle.modelYear,this.color=this.selected_vehicle.color,this.reg_number=this.selected_vehicle.reg_number,this.note=this.selected_vehicle.note,console.log("this.selected_vehicle",this.selected_vehicle)}ngOnInit(){this.util.presentLoading(),this.api.getData("vehicleBrand").subscribe(e=>{e.success&&(this.data=e.data,console.log(this.data),this.util.dismissLoading())},e=>{this.err=e.error.errors||e.error.message,this.util.presentToast(this.err),this.util.dismissLoading()})}changeModel(e){this.model_id2=e.detail.value,console.log(this.model_id2),this.api.getData("vehicleModel/"+this.model_id2).subscribe(e=>{e.success&&(this.model=e.data)},e=>{this.err=e.error.errors||e.error.message,this.util.presentToast(this.err)})}pickImage(e){this.camera.getPicture({quality:100,sourceType:e,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,allowEdit:!1,correctOrientation:!0,targetHeight:300,targetWidth:300}).then(e=>{this.img="data:image/jpeg;base64,"+e,this.imageUri=e,this.base64Image=this.sanitize.bypassSecurityTrustResourceUrl(this.img),this.image=this.imageUri,this.image=this.img},e=>{this.err=e.error.errors||e.error.message,this.util.presentToast(this.err)})}selectImage(){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:()=>{this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"Use Camera",handler:()=>{this.pickImage(this.camera.PictureSourceType.CAMERA)}},{text:"Cancel",role:"cancel"}]});yield e.present()})}manageVechicle(e){let t={model_id:this.model_id,color:this.color,reg_number:this.reg_number,model:this.models,note:this.note,image:this.imageUri};""!=this.imageUri&&null!=this.imageUri||delete t.image,this.api.postDataWithToken("vehicle/"+e+"/update",t).subscribe(e=>{e.success&&(this.util.presentToast(e.msg),this.nav.navigateForward("manage-vehicle"))},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](o.Q),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](h.b))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-edit-vehicle"]],decls:45,vars:22,consts:[[1,"ion-no-border"],["mode","md"],["slot","start"],["slot","end"],["defaultHref","home","icon","chevron-back-outline","text","","mode","md"],[1,"ion-padding"],["mode","md","lines","none"],["mode","ios","position","stacked",1,"st_lbl"],[3,"placeholder","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"placeholder","ngModel","disabled","ngModelChange"],[3,"placeholder","value","ngModel","ngModelChange"],[1,"upload_div",3,"click"],[1,"up_div",3,"hidden"],[1,"up_lbl"],[1,"touch_lbl"],[1,"user_img",3,"src","hidden"],["expand","full",1,"main_btn","ion-text-capitalize",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-header",0),m["\u0275\u0275elementStart"](1,"ion-toolbar",1),m["\u0275\u0275elementStart"](2,"ion-buttons",2),m["\u0275\u0275element"](3,"ion-menu-button"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"ion-buttons",3),m["\u0275\u0275element"](5,"ion-back-button",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"ion-title"),m["\u0275\u0275text"](7,"Edit vehicle"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"ion-content",5),m["\u0275\u0275elementStart"](9,"ion-item",6),m["\u0275\u0275elementStart"](10,"ion-label",7),m["\u0275\u0275text"](11," Company "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"ion-select",8),m["\u0275\u0275listener"]("ionChange",function(e){return t.changeModel(e)}),m["\u0275\u0275template"](13,p,2,2,"ion-select-option",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"ion-item",6),m["\u0275\u0275elementStart"](15,"ion-label",7),m["\u0275\u0275text"](16," Model "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"ion-select",10),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.model_id=e}),m["\u0275\u0275template"](18,u,2,2,"ion-select-option",9),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"ion-item",6),m["\u0275\u0275elementStart"](20,"ion-label",7),m["\u0275\u0275text"](21," Model "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](22,"ion-input",11),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.models=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"ion-item",6),m["\u0275\u0275elementStart"](24,"ion-label",7),m["\u0275\u0275text"](25," Color "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"ion-input",11),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.color=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](27,"ion-item",6),m["\u0275\u0275elementStart"](28,"ion-label",7),m["\u0275\u0275text"](29," No. Plate "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](30,"ion-input",11),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.reg_number=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"ion-item",6),m["\u0275\u0275elementStart"](32,"ion-label",7),m["\u0275\u0275text"](33," Note "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"ion-input",11),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.note=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"div",12),m["\u0275\u0275listener"]("click",function(){return t.selectImage()}),m["\u0275\u0275elementStart"](36,"div",13),m["\u0275\u0275elementStart"](37,"h3",14),m["\u0275\u0275text"](38,"Upload your vehicle image"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](39,"p",15),m["\u0275\u0275text"](40,"(Touch to upload/click)"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](41,"img",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"ion-footer",0),m["\u0275\u0275elementStart"](43,"ion-button",17),m["\u0275\u0275listener"]("click",function(){return t.manageVechicle(t.selected_vehicle.id)}),m["\u0275\u0275text"](44," Add "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](12),m["\u0275\u0275propertyInterpolate"]("placeholder",null==t.selected_vehicle||null==t.selected_vehicle.model||null==t.selected_vehicle.model.brand?null:t.selected_vehicle.model.brand.name),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.data),m["\u0275\u0275advance"](4),m["\u0275\u0275propertyInterpolate"]("placeholder",null==t.selected_vehicle||null==t.selected_vehicle.model?null:t.selected_vehicle.model.name),m["\u0275\u0275property"]("ngModel",t.model_id)("disabled",""==t.model_id2),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",t.model),m["\u0275\u0275advance"](4),m["\u0275\u0275propertyInterpolate"]("placeholder",null==t.selected_vehicle?null:t.selected_vehicle.modelYear),m["\u0275\u0275propertyInterpolate"]("value",null==t.selected_vehicle?null:t.selected_vehicle.modelYear),m["\u0275\u0275property"]("ngModel",t.models),m["\u0275\u0275advance"](4),m["\u0275\u0275propertyInterpolate"]("placeholder",null==t.selected_vehicle?null:t.selected_vehicle.color),m["\u0275\u0275propertyInterpolate"]("value",null==t.selected_vehicle?null:t.selected_vehicle.color),m["\u0275\u0275property"]("ngModel",t.color),m["\u0275\u0275advance"](4),m["\u0275\u0275propertyInterpolate"]("placeholder",null==t.selected_vehicle?null:t.selected_vehicle.reg_number),m["\u0275\u0275propertyInterpolate"]("value",null==t.selected_vehicle?null:t.selected_vehicle.reg_number),m["\u0275\u0275property"]("ngModel",t.reg_number),m["\u0275\u0275advance"](4),m["\u0275\u0275propertyInterpolate"]("placeholder",null==t.selected_vehicle?null:t.selected_vehicle.note),m["\u0275\u0275propertyInterpolate"]("value",null==t.selected_vehicle?null:t.selected_vehicle.note),m["\u0275\u0275property"]("ngModel",t.note),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("hidden",null!=t.image),m["\u0275\u0275advance"](5),m["\u0275\u0275propertyInterpolate"]("src",t.image,m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275property"]("hidden",null==t.image),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("disabled",""==t.model_id||""==t.models||""==t.note||""==t.color||""==t.reg_number||""==t.model_id))},directives:[o.p,o.K,o.h,o.w,o.e,o.f,o.I,o.k,o.s,o.t,o.B,o.U,l.k,i.e,i.h,o.r,o.V,o.o,o.g,o.C],styles:["ion-content[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]   ion-select-option[_ngcontent-%COMP%]{font-size:18px;color:var(--blue);font-family:rubik_md}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0;border-bottom:solid;border-bottom-width:1px;border-bottom-color:var(--silver)}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .st_lbl[_ngcontent-%COMP%]{font-size:14px;color:var(--silver);font-family:rubik_r}ion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:16px;color:var(--blue);font-family:rubik_md}ion-content[_ngcontent-%COMP%]   .upload_div[_ngcontent-%COMP%]{height:130px;box-shadow:0 3px 6px 0 rgba(0,0,0,.16);border:2px dotted var(--my_theme);margin-top:30px;display:flex;justify-content:center;align-items:center}ion-content[_ngcontent-%COMP%]   .upload_div[_ngcontent-%COMP%]   .up_div[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]   .upload_div[_ngcontent-%COMP%]   .up_div[_ngcontent-%COMP%]   .up_lbl[_ngcontent-%COMP%]{font-size:18px;color:var(--my_theme);font-family:rubik_r;margin-top:0;margin-bottom:5px}ion-content[_ngcontent-%COMP%]   .upload_div[_ngcontent-%COMP%]   .up_div[_ngcontent-%COMP%]   .touch_lbl[_ngcontent-%COMP%]{font-size:14px;color:var(--silver);font-family:rubik_r;margin:0}ion-content[_ngcontent-%COMP%]   .upload_div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:130px;width:100%}"]}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[r.i.forChild(g)],r.i]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[l.b,i.a,o.L,_]]}),e})()}}]);