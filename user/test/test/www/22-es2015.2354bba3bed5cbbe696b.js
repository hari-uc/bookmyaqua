(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"99Un":function(t,e,i){"use strict";i.r(e),i.d(e,"HomePageModule",function(){return b});var s=i("cxbk"),o=i("ofXK"),n=i("3Pt+"),a=i("TEn/"),l=i("tyNb"),r=i("h+qT"),c=i("7itd"),d=i("H+bZ"),u=i("2Rin"),g=i("Bfh1"),h=i("mtRb"),m=i("92l+"),p=i("WOgW"),y=i("fXoL"),f=i("pxUr");const S=["placesRef"],O=["search"];function C(t,e){if(1&t){const t=y["\u0275\u0275getCurrentView"]();y["\u0275\u0275elementStart"](0,"div",13),y["\u0275\u0275listener"]("click",function(){y["\u0275\u0275restoreView"](t);const i=e.$implicit;return y["\u0275\u0275nextContext"]().getData(i)}),y["\u0275\u0275element"](1,"img",14),y["\u0275\u0275elementStart"](2,"p",15),y["\u0275\u0275text"](3),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,i=y["\u0275\u0275nextContext"]();y["\u0275\u0275classProp"]("active",i.select==t.name),y["\u0275\u0275advance"](1),y["\u0275\u0275propertyInterpolate"]("src",null==t?null:t.imageUri,y["\u0275\u0275sanitizeUrl"]),y["\u0275\u0275advance"](2),y["\u0275\u0275textInterpolate"](null==t?null:t.name)}}const v=[{path:"",component:(()=>{class t{constructor(t,e,i,s,o,n,a,l,r,c){this.nav=t,this.menu=e,this.util=i,this.api=s,this.nativeGeocoder=o,this.geolocation=n,this.diagnostic=a,this.alertCtrl=l,this.androidPermissions=r,this.locationAccuracy=c,this.Centerlat=22.298922,this.Centerlng=70.802177,this.petrol=1,this.diesel=1,this.gas=1,this.isshow=!1,this.origin={},this.destination={},this.providerArray=[],this.icon="../../../assets/image/sender_ic.png",this.iconUrl="../../../assets/image/sender_ic.png",this.renderOptions={suppressMarkers:!0,draggable:!1},this.styles=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],this.select="",this.provider=[],this.geoencoderOptions={useLocale:!0,maxResults:5},this.locationData={},setTimeout(()=>{this.diagnostic.isLocationEnabled().then(t=>{0==t&&this.requestToSwitchOnGPS()}).catch(t=>{console.log(t),alert(JSON.stringify(t))})},5e3),this.locationCoords={latitude:"",longitude:"",accuracy:"",timestamp:""},this.menu.enable(!0),setTimeout(()=>{this.getLocationCoordinates(),this.util.dismissLoading()},3e3)}requestToSwitchOnGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(t=>{console.log("ask gps opermission",t),this.getLocationCoordinates()},t=>alert(JSON.stringify(t)))}gasPump(){this.isshow=!0,this.isshow&&1==this.gas&&0==this.petrol&&0==this.diesel&&this.nav.navigateForward("pick-detail")}getData(t){this.util.dismissLoading(),this.select=t.name,this.api.select_fuel=this.select;let e=[];this.providerArray.push(t,this.provider),this.provider.forEach(i=>{let s=!1;t.sub_fuel_type.forEach(t=>{i.fuel_type.includes(t.id)&&!s&&(e.push(i),s=!0)})}),0==t.sub_fuel_type.length?this.util.presentToast("No Fuel available! "):(localStorage.setItem("pro_id",t.id),this.util.dismissLoading(),this.nav.navigateForward("pick-detail"))}checkGPSPermission(){this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(t=>{t.hasPermission?this.askToTurnOnGPS():this.requestGPSPermission()},t=>{})}requestGPSPermission(){this.locationAccuracy.canRequest().then(t=>{t?console.log("4"):this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(()=>{this.askToTurnOnGPS()},t=>{alert("requestPermission Error requesting location permissions "+t)})})}askToTurnOnGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{this.getLocationCoordinates()},t=>alert("Error requesting location permissions "+JSON.stringify(t)))}ngOnInit(){}get(){this.util.dismissLoading(),this.getGeoencoder(this.latitude,this.longitude),localStorage.setItem("curentLat",JSON.stringify(this.latitude)),localStorage.setItem("curentLang",JSON.stringify(this.longitude)),localStorage.setItem("proLattt",JSON.stringify(this.latitude)),localStorage.setItem("proLangg",JSON.stringify(this.longitude)),localStorage.setItem("lat",JSON.stringify(this.latitude)),localStorage.setItem("lang",JSON.stringify(this.longitude)),this.api.lat=this.latitude,this.api.long=this.longitude;let t={lat:this.latitude,lang:this.longitude,radius:100};this.util.presentLoading(),this.api.postData("home",t).subscribe(t=>{this.util.dismissLoading(),t.success&&(this.data=t.data,this.provider=t.data.provider,this.select=t.data.fuel_type[1].name)},t=>{this.util.dismissLoading()}),this.zoom=8,this.util.dismissLoading()}ionViewWillEnter(){}getDatas(t,e){const i=new FormData;this.util.dismissLoading(),i.append("lat",t),i.append("lang",e),i.append("radius","1000"),this.api.postData("home",i).subscribe(t=>{this.util.dismissLoading(),t.success&&(this.data=t.data,this.provider=t.data.provider,this.select=t.data.fuel_type[1].name)},t=>{this.util.dismissLoading()})}handleAddressChange(t){this.util.dismissLoading(),this.latitude=t.geometry.location.lat(),this.longitude=t.geometry.location.lng(),this.getGeoencoder(this.latitude,this.longitude),localStorage.setItem("curentLat",JSON.stringify(this.latitude)),localStorage.setItem("curentLang",JSON.stringify(this.longitude)),localStorage.setItem("proLattt",JSON.stringify(this.latitude)),localStorage.setItem("proLangg",JSON.stringify(this.longitude)),localStorage.setItem("lat",JSON.stringify(this.latitude)),localStorage.setItem("lang",JSON.stringify(this.longitude)),localStorage.setItem("addressOfLast",t.formatted_address),localStorage.setItem("lat",JSON.stringify(this.latitude)),localStorage.setItem("lang",JSON.stringify(this.longitude)),this.util.dismissLoading()}getLocationCoordinates(){this.util.presentLoading(),this.geolocation.getCurrentPosition().then(t=>{this.util.dismissLoading(),this.locationCoords.latitude=t.coords.latitude,this.locationCoords.longitude=t.coords.longitude,this.locationCoords.accuracy=t.coords.accuracy,this.locationCoords.timestamp=t.timestamp,this.getGeoencoder(this.latitude,this.longitude),localStorage.setItem("curentLat",JSON.stringify(this.locationCoords.latitude)),localStorage.setItem("curentLang",JSON.stringify(this.locationCoords.longitude)),localStorage.setItem("proLattt",JSON.stringify(this.locationCoords.latitude)),localStorage.setItem("proLangg",JSON.stringify(this.locationCoords.longitude)),localStorage.setItem("lat",JSON.stringify(this.locationCoords.latitude)),localStorage.setItem("lang",JSON.stringify(this.locationCoords.longitude)),this.latitude=JSON.parse(this.locationCoords.latitude),this.longitude=JSON.parse(this.locationCoords.longitude),this.getDatas(this.locationCoords.latitude,this.locationCoords.longitude),this.api.lat=this.latitude,this.api.long=this.longitude,this.util.dismissLoading()}).catch(t=>{this.util.dismissLoading(),alert("Error getting location"+t)})}getGeoencoder(t,e){this.nativeGeocoder.reverseGeocode(t,e,this.geoencoderOptions).then(t=>{this.util.dismissLoading(),this.address=this.generateAddress(t[0]),localStorage.setItem("addressOfLast",this.address),localStorage.setItem("gene",this.address)}).catch(t=>{this.util.dismissLoading()})}generateAddress(t){this.util.dismissLoading();let e=[],i="";for(let s in t)e.push(t[s]);e.reverse();for(let s in e)e[s].length&&(i+=e[s]+", ");return i.slice(0,-2)}getPointFromLongLat(t,e){return this.util.dismissLoading(),ol.proj.transform([t,e],"EPSG:4326","EPSG:3857")}markerDragEnd(t){this.latitude=t.lat,this.util.dismissLoading()}}return t.\u0275fac=function(e){return new(e||t)(y["\u0275\u0275directiveInject"](a.Q),y["\u0275\u0275directiveInject"](a.O),y["\u0275\u0275directiveInject"](u.a),y["\u0275\u0275directiveInject"](d.a),y["\u0275\u0275directiveInject"](r.a),y["\u0275\u0275directiveInject"](g.a),y["\u0275\u0275directiveInject"](h.a),y["\u0275\u0275directiveInject"](a.b),y["\u0275\u0275directiveInject"](p.a),y["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=y["\u0275\u0275defineComponent"]({type:t,selectors:[["app-home"]],viewQuery:function(t,e){if(1&t&&(y["\u0275\u0275viewQuery"](S,1),y["\u0275\u0275viewQuery"](O,1)),2&t){let t;y["\u0275\u0275queryRefresh"](t=y["\u0275\u0275loadQuery"]())&&(e.placesRef=t.first),y["\u0275\u0275queryRefresh"](t=y["\u0275\u0275loadQuery"]())&&(e.searchElementRef=t.first)}},decls:18,vars:9,consts:[[1,"ion-no-border"],["mode","md"],["slot","start"],[3,"styles","latitude","longitude","disableDefaultUI"],[3,"latitude","longitude","iconUrl"],[1,"location_div"],[1,"loc_lbl"],[1,"input_div"],["src","../../../assets/image_icon/location.svg"],["autofocus","true","ngx-google-places-autocomplete","",3,"value","onAddressChange"],["placesref","ngx-places"],[1,"fule_type"],["class","fule",3,"active","click",4,"ngFor","ngForOf"],[1,"fule",3,"click"],["alt","","srcset","",3,"src"],[1,"fule_lbl"]],template:function(t,e){1&t&&(y["\u0275\u0275elementStart"](0,"ion-header",0),y["\u0275\u0275elementStart"](1,"ion-toolbar",1),y["\u0275\u0275elementStart"](2,"ion-buttons",2),y["\u0275\u0275element"](3,"ion-menu-button"),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](4,"ion-title"),y["\u0275\u0275text"](5,"Lofuel"),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](6,"ion-content"),y["\u0275\u0275elementStart"](7,"agm-map",3),y["\u0275\u0275element"](8,"agm-marker",4),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](9,"div",5),y["\u0275\u0275elementStart"](10,"h3",6),y["\u0275\u0275text"](11,"Delivery Location"),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](12,"div",7),y["\u0275\u0275element"](13,"ion-icon",8),y["\u0275\u0275elementStart"](14,"input",9,10),y["\u0275\u0275listener"]("onAddressChange",function(t){return e.handleAddressChange(t)}),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementStart"](16,"div",11),y["\u0275\u0275template"](17,C,4,4,"div",12),y["\u0275\u0275elementEnd"](),y["\u0275\u0275elementEnd"]()),2&t&&(y["\u0275\u0275advance"](7),y["\u0275\u0275property"]("styles",e.styles)("latitude",e.latitude)("longitude",e.longitude)("disableDefaultUI",!0),y["\u0275\u0275advance"](1),y["\u0275\u0275property"]("latitude",e.latitude)("longitude",e.longitude)("iconUrl",e.iconUrl),y["\u0275\u0275advance"](6),y["\u0275\u0275propertyInterpolate"]("value",e.address),y["\u0275\u0275advance"](3),y["\u0275\u0275property"]("ngForOf",null==e.data?null:e.data.fuel_type))},directives:[a.p,a.K,a.h,a.w,a.I,a.k,f.b,f.c,a.q,c.GooglePlaceDirective,o.k],styles:["ion-content[_ngcontent-%COMP%]   .fule_type[_ngcontent-%COMP%]{height:128px;background-color:var(--white);border-radius:20px 20px 0 0;box-shadow:0 -1px 6px 0 rgba(0,0,0,.16);width:100%;position:absolute;bottom:0;display:flex;align-items:center;justify-content:space-around}ion-content[_ngcontent-%COMP%]   .fule_type[_ngcontent-%COMP%]   .fule[_ngcontent-%COMP%]{text-align:center;opacity:.5}ion-content[_ngcontent-%COMP%]   .fule_type[_ngcontent-%COMP%]   .fule[_ngcontent-%COMP%]   .fule_lbl[_ngcontent-%COMP%]{font-size:18px;font-family:rubik_md;color:var(--my_theme);margin-bottom:0;margin-top:5px}ion-content[_ngcontent-%COMP%]   .fule_type[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{opacity:1}ion-content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{height:100%;width:100%}ion-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;font-family:rubik_r;margin-left:10px;color:#fff}ion-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}"]}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=y["\u0275\u0275defineInjector"]({imports:[[l.i.forChild(v)],l.i]}),t})();var I=i("IZFd");let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=y["\u0275\u0275defineInjector"]({imports:[[o.b,n.a,a.L,f.a.forRoot({apiKey:s.a.google_map_key}),I.b,_,c.GooglePlaceModule]]}),t})()}}]);