(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{jyQT:function(t,e,n){"use strict";n.r(e),n.d(e,"PaymentMethodPageModule",function(){return S});var i=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),r=n("tyNb"),s=n("mrSG"),c=n("tF4M"),l=n("H+bZ"),d=n("2Rin"),p=n("mhnK"),m=n("fXoL"),h=n("ejwX");function g(t,e){1&t&&m["\u0275\u0275element"](0,"img",16)}function u(t,e){1&t&&m["\u0275\u0275element"](0,"img",17)}function y(t,e){if(1&t&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275element"](1,"ngx-paypal",18),m["\u0275\u0275elementEnd"]()),2&t){const t=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("config",t.payPalConfig)}}function _(t,e){if(1&t){const t=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"div",19),m["\u0275\u0275element"](2,"div",20),m["\u0275\u0275elementStart"](3,"ion-label",21),m["\u0275\u0275text"](4," CARD NUMBER "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"ion-item",22),m["\u0275\u0275elementStart"](6,"ion-input",23),m["\u0275\u0275listener"]("ngModelChange",function(e){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().stripeData.number=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](7,"img",24),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"ion-row"),m["\u0275\u0275elementStart"](9,"ion-col",25),m["\u0275\u0275elementStart"](10,"ion-label",21),m["\u0275\u0275text"](11," EXPRIRATION MONTH "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"ion-item",22),m["\u0275\u0275elementStart"](13,"ion-input",26),m["\u0275\u0275listener"]("ngModelChange",function(e){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().stripeData.expMonth=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"ion-col",27),m["\u0275\u0275elementStart"](15,"ion-label",21),m["\u0275\u0275text"](16," EXPRIRATION YEAR "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](17,"ion-item",22),m["\u0275\u0275elementStart"](18,"ion-input",28),m["\u0275\u0275listener"]("ngModelChange",function(e){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().stripeData.expYear=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"ion-row"),m["\u0275\u0275elementStart"](20,"ion-col",29),m["\u0275\u0275elementStart"](21,"ion-label",21),m["\u0275\u0275text"](22," CVV "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"ion-item",22),m["\u0275\u0275elementStart"](24,"ion-input",30),m["\u0275\u0275listener"]("ngModelChange",function(e){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().stripeData.cvc=e}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&t){const t=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",t.stripeData.number),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngModel",t.stripeData.expMonth),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("ngModel",t.stripeData.expYear),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngModel",t.stripeData.cvc)}}function f(t,e){if(1&t){const t=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-button",31),m["\u0275\u0275listener"]("click",function(){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().payment()}),m["\u0275\u0275text"](1," Continue "),m["\u0275\u0275elementEnd"]()}}function C(t,e){if(1&t){const t=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-button",31),m["\u0275\u0275listener"]("click",function(){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().goPayStripe()}),m["\u0275\u0275text"](1," Continue "),m["\u0275\u0275elementEnd"]()}}function b(t,e){if(1&t){const t=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-button",31),m["\u0275\u0275listener"]("click",function(){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().payWithRazor()}),m["\u0275\u0275text"](1," Continue "),m["\u0275\u0275elementEnd"]()}}const v=function(t){return{active:t}},x=function(t){return{at_lbl:t}},M=[{path:"",component:(()=>{class t{constructor(t,e,n,i,a,o){this.nav=t,this.api=e,this.utl=n,this.modalController=i,this.util=a,this.stripe=o,this.card=1,this.paypal=0,this.razors=0,this.checkbtn=!1,this.stripes=0,this.stripeData={number:"",expMonth:0,expYear:0,cvc:""},this.stripePublishKey=localStorage.getItem("stripe_key")}ngOnInit(){this.data=JSON.parse(localStorage.getItem("item")),this.api.getDataWithToken("payment/setting").subscribe(t=>{t.success&&(this.paymentSetting=t.data,localStorage.setItem("stripe_key",t.data.STRIPE_KEY),this.razor=t.data.RAZOR_ID)},t=>{})}payment(){1===this.paymentSetting.offline_payment?(this.utl.presentLoading(),this.card=1,this.paypal=0,this.razors=0,this.stripes=0,this.api.postDataWithToken("mackPayment",{payment_method:"offline",payment_status:"1",id:this.data.id}).subscribe(t=>{t.success&&(this.nav.navigateRoot("/home"),this.utl.presentToast("Booking Successfully Completed"),this.utl.dismissLoading(),this.presentModal())},t=>{this.utl.dismissLoading()})):(this.card=1,this.paypal=0,this.razors=0,this.stripes=0,this.util.presentToast("Payment not Possible"))}payWithRazor(){RazorpayCheckout.open({description:"Credits towards consultation",image:"https://i.imgur.com/3g7nmJC.png",currency:this.paymentSetting.currency,key:this.paymentSetting.RAZOR_ID,amount:100*this.data.price,name:"User",theme:{color:"#2C69A5"},modal:{ondismiss:function(){alert("dismissed")}}},t=>{this.util.presentLoading(),this.api.postDataWithToken("mackPayment",{payment_token:t,payment_method:"Razor",payment_status:1,price:this.data.price,id:this.data.id}).subscribe(t=>{t.success&&(this.util.presentToast("Payment Done"),this.util.nav.navigateForward("home"),this.util.dismissLoading(),this.presentModal())},t=>{this.util.dismissLoading(),this.util.presentToast("Something Went Wrong")})},function(t){alert(t.description+" (Error "+t.code+")")})}paypalPay(){1===this.paymentSetting.paypal_status?(this.paypal=1,this.card=0,this.razors=0,this.stripes=0,this.initConfig(this.data.price,"User")):(this.paypal=1,this.card=0,this.razors=0,this.stripes=0,this.util.presentToast("Payment not possible"))}presentModal(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:p.a,cssClass:"successModal"});return yield t.present()})}initConfig(t,e){this.payPalConfig={currency:this.paymentSetting.currency,clientId:"sb",createOrderOnClient:n=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:this.paymentSetting.currency,value:t,breakdown:{item_total:{currency_code:this.paymentSetting.currency,value:t}}},items:[{name:e,quantity:"1",category:"DIGITAL_GOODS",unit_amount:{currency_code:this.paymentSetting.currency,value:t}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(t,e)=>{console.log("onApprove - transaction was approved, but not authorized",t,e),e.order.get().then(t=>{console.log("onApprove - you can get full order details inside onApprove: ",t)})},onClientAuthorization:t=>{console.log("onClientAuthorization - you should probably inform your server about completed transaction at this point",t),this.util.presentLoading(),this.api.postDataWithToken("mackPayment",{payment_token:t.id,payment_method:"Paypal",payment_status:1,price:this.data.price,id:this.data.id}).subscribe(t=>{t.success&&(this.util.presentToast("Payment Done"),this.util.nav.navigateForward("home"),this.util.dismissLoading(),this.presentModal())},t=>{this.util.dismissLoading(),this.util.presentToast("Something Went Wrong")})},onCancel:(t,e)=>{console.log("OnCancel",t,e)},onError:t=>{},onClick:(t,e)=>{}}}paywithstripe(){1===this.paymentSetting.stipe_status?(this.card=0,this.paypal=0,this.stripes=1,this.razors=0):(this.card=0,this.paypal=0,this.stripes=1,this.razors=0,this.util.presentToast("payment not possible"))}payWithRa(){1===this.paymentSetting.razor_status?(this.card=0,this.paypal=0,this.stripes=0,this.razors=1):(this.card=0,this.paypal=0,this.stripes=0,this.razors=1,this.util.presentToast("Payment Not Possible"))}goPayStripe(){this.util.presentLoading(),this.stripe.setPublishableKey(this.stripePublishKey),this.stripe.createCardToken(this.stripeData).then(t=>{this.api.postDataWithToken("mackPayment",{payment_token:t.id,payment_method:"Stripe",payment_status:1,price:this.data.price,id:this.data.id}).subscribe(t=>{t.success?(this.util.presentToast("Payment Done"),this.util.nav.navigateForward("home"),this.presentModal(),this.util.dismissLoading()):(this.util.dismissLoading(),this.util.presentToast("Something Went Wrong"))},t=>{this.util.dismissLoading(),this.util.presentToast("Something Went Wrong")})}).catch(t=>{this.util.presentToast(t),this.checkbtn=!1,this.util.dismissLoading()})}}return t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275directiveInject"](o.Q),m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](o.P),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](c.a))},t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:t,selectors:[["app-payment-method"]],decls:28,vars:22,consts:[[1,"ion-no-border"],["mode","md"],["slot","start"],["slot","end"],["defaultHref","home","icon","chevron-back-outline","text","","mode","md"],[1,"ion-padding-horizontal","ion-padding-top"],[1,"pay_method"],[1,"card_div",3,"ngClass","click"],["src","../../../assets/image/card.png","class","card_img",4,"ngIf"],["src","../../../assets/image/white_card.png",4,"ngIf"],[1,"card_lbl",3,"ngClass"],["src","../../../assets/image/paypal.png"],["src","../../../assets/image/razor.png"],["src","../../../assets/image/Stripe.png"],[4,"ngIf"],["class","main_btn ion-text-capitalize","expand","full",3,"click",4,"ngIf"],["src","../../../assets/image/card.png",1,"card_img"],["src","../../../assets/image/white_card.png"],[3,"config"],[1,"card_div2","ion-margin-horizontal"],[1,"border_bottom"],[1,"card_label"],["lines","none","mode","md"],["name","number",1,"card_num",3,"ngModel","ngModelChange"],["slot","end","src","../../../assets/images/visa.png"],["size","6",1,"ion-no-padding"],["name","expMonth",1,"card_num",3,"ngModel","ngModelChange"],["size","5","offset","1",1,"ion-no-padding"],["name","expYear",1,"card_num",3,"ngModel","ngModelChange"],["size","12",1,"ion-no-padding"],["type","password","name","cvc",1,"card_num",3,"ngModel","ngModelChange"],["expand","full",1,"main_btn","ion-text-capitalize",3,"click"]],template:function(t,e){1&t&&(m["\u0275\u0275elementStart"](0,"ion-header",0),m["\u0275\u0275elementStart"](1,"ion-toolbar",1),m["\u0275\u0275elementStart"](2,"ion-buttons",2),m["\u0275\u0275element"](3,"ion-menu-button"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"ion-buttons",3),m["\u0275\u0275element"](5,"ion-back-button",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"ion-title"),m["\u0275\u0275text"](7,"payment method"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"ion-content",5),m["\u0275\u0275elementStart"](9,"div",6),m["\u0275\u0275elementStart"](10,"div",7),m["\u0275\u0275listener"]("click",function(){return e.payment()}),m["\u0275\u0275elementStart"](11,"div"),m["\u0275\u0275template"](12,g,1,0,"img",8),m["\u0275\u0275template"](13,u,1,0,"img",9),m["\u0275\u0275elementStart"](14,"h3",10),m["\u0275\u0275text"](15,"Card Pay"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",7),m["\u0275\u0275listener"]("click",function(){return e.paypalPay()}),m["\u0275\u0275element"](17,"img",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"div",7),m["\u0275\u0275listener"]("click",function(){return e.payWithRa()}),m["\u0275\u0275element"](19,"img",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"div",7),m["\u0275\u0275listener"]("click",function(){return e.paywithstripe()}),m["\u0275\u0275element"](21,"img",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](22,y,2,1,"div",14),m["\u0275\u0275template"](23,_,25,4,"div",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](24,"ion-footer",0),m["\u0275\u0275template"](25,f,2,0,"ion-button",15),m["\u0275\u0275template"](26,C,2,0,"ion-button",15),m["\u0275\u0275template"](27,b,2,0,"ion-button",15),m["\u0275\u0275elementEnd"]()),2&t&&(m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](12,v,1==e.card)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",0==e.card),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",1==e.card),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](14,x,1==e.card)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](16,v,1==e.paypal)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](18,v,1==e.razors)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](20,v,1==e.stripes)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",1===e.paypal),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",1===e.stripes),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",1===e.card),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",1===e.stripes),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",1===e.razors))},directives:[o.p,o.K,o.h,o.w,o.e,o.f,o.I,o.k,i.j,i.l,o.o,h.b,o.t,o.s,o.r,o.V,a.e,a.h,o.z,o.j,o.g],styles:["ion-content[_ngcontent-%COMP%]   .pay_method[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;padding-top:20px}ion-content[_ngcontent-%COMP%]   .pay_method[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{height:120px;border-radius:5px;border:1px dashed var(--my_theme);width:47%;margin-bottom:30px;box-shadow:0 2px 6px 0 rgba(0,0,0,.16);display:flex;justify-content:center;align-items:center}ion-content[_ngcontent-%COMP%]   .pay_method[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .card_img[_ngcontent-%COMP%]{height:50px;width:57px}ion-content[_ngcontent-%COMP%]   .pay_method[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .card_lbl[_ngcontent-%COMP%]{font-size:15px;font-family:rubik_md;color:var(--blue);margin-bottom:0;margin-top:10px}ion-content[_ngcontent-%COMP%]   .pay_method[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:var(--my_theme);box-shadow:none}ion-content[_ngcontent-%COMP%]   .pay_method[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   .at_lbl[_ngcontent-%COMP%]{color:var(--white)}ion-content[_ngcontent-%COMP%]   .card_div2[_ngcontent-%COMP%]{margin-left:32px;margin-right:34px}ion-content[_ngcontent-%COMP%]   .card_div2[_ngcontent-%COMP%]   .btn_lbl[_ngcontent-%COMP%]{margin-bottom:16px;font-family:rubik_md;color:var(--theme-color)}ion-content[_ngcontent-%COMP%]   .card_div2[_ngcontent-%COMP%]   .btn_lbl[_ngcontent-%COMP%]   .add_btn[_ngcontent-%COMP%]{--color:#3171e0;text-transform:capitalize;font-family:rubik_md;font-size:18px;height:20px}ion-content[_ngcontent-%COMP%]   .card_div2[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:#fff;box-shadow:0 1px 10px 1px #eee;border:0;border-radius:3px;margin:5px 0 16px;padding:0}ion-content[_ngcontent-%COMP%]   .card_div2[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .card_num[_ngcontent-%COMP%]{font-size:14px;color:var(--theme-color);font-family:rubik_md;border:none}ion-content[_ngcontent-%COMP%]   .card_div2[_ngcontent-%COMP%]   .card_label[_ngcontent-%COMP%]{font-family:rubik_md;font-size:10px;color:#1492e6;margin-bottom:3px}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[r.i.forChild(M)],r.i]}),t})(),S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[i.b,a.a,o.L,P,h.a]]}),t})()}}]);